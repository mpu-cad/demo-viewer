(this["webpackJsonpMPU-Viewer"]=this["webpackJsonpMPU-Viewer"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(35),o=a.n(s),r=(a(76),a(5)),l=a(7),c=a(9),u=a(8),h=a(39),d=a.n(h),m=(a(77),a(40)),v=function(e){var t=Object(m.a)(),a=t.t,n=t.i18n;function s(e){n.changeLanguage(e)}return i.a.createElement("nav",{className:"navbar navbar-expand-lg header",id:"Nav"},i.a.createElement("p",{className:"navbar-brand"},i.a.createElement("img",{src:d.a,width:"30",height:"30",className:"d-inline-block align-top mr-3",alt:""}),a("header.title")),i.a.createElement("section",{className:"flags"},i.a.createElement("span",{className:"flag flag-gb",title:"English",onClick:function(){return s("en")}}),i.a.createElement("span",{className:"flag flag-ru",title:"Russian",onClick:function(){return s("ru")}})))},p=(a(83),a(25)),f=function(e){return Object(p.b)("stores")(Object(p.c)(e))};var b=f((function(e){var t=e.stores.tabsFlagStore,a=e.stores.modelsStore.currentModel,n=Object(m.a)().t,s=function(e){var a=e.target.dataset.name;t.switchTab(a)};return i.a.createElement("nav",{id:"Navbar"},i.a.createElement("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist"},i.a.createElement("a",{onClick:s,"data-name":"modelsList",className:"nav-item nav-link active",id:"nav-home-tab","data-toggle":"tab",href:"#nav-home",role:"tab","aria-controls":"nav-home","aria-selected":"true"},n("tabs.view")),i.a.createElement("a",{onClick:s,"data-name":"catalog",className:"nav-item nav-link",id:"nav-profile-tab","data-toggle":"tab",href:"#nav-profile",role:"tab","aria-controls":"nav-profile","aria-selected":"false"},n("tabs.catalog")),1===a.id?i.a.createElement("a",{onClick:s,"data-name":"ietm",className:"nav-item nav-link button-show-all",id:"nav-contact-tab","data-toggle":"tab",href:"#nav-contact",role:"tab","aria-controls":"nav-contact","aria-selected":"false"},n("tabs.manual")):null))})),w=(a(85),a(15)),g=a(22),y=a.n(g),_=a(32),x=a(6),E=a(3),j=a(21),O=a(0),S=a(43),M=(a(87),a(67)),k=(a(90),a(44)),C=a.n(k),N=a(119),B=a(118),z=a(18),L=function(){function e(t,a,n,i){var s=this;Object(r.a)(this,e),this.hideMenu=function(){s.contextMenu.style.visibility="hidden"},this.canvas=t,this.hiddenParts=[],this.controls=a,this.viewer=n,this.tabName=i,this.contextMenu=document.querySelector("#context-menu"),this.intersects=null,this.contextMenu.querySelector("#button-hide").addEventListener("click",(function(e){e.stopPropagation(),s.hide(),s.contextMenu.style.visibility="hidden"})),document.querySelectorAll("#button-fit").forEach((function(e){e.addEventListener("click",(function(){s.fitToView(),s.contextMenu.style.visibility="hidden"}))})),document.querySelectorAll(".button-show-all").forEach((function(e){e.addEventListener("click",(function(){s.showObjects(),s.contextMenu.style.visibility="hidden"}))})),document.querySelector("#button-annotation").addEventListener("click",(function(e){e.stopPropagation();var t=document.querySelector("#annottation-collapse");t.classList.toggle("collapse"),e.clientY+180>document.body.clientHeight?t.style.top=t.clientTop-180+"px":t.style.top=t.clientTop+40+"px"})),document.querySelectorAll("#button-isolate").forEach((function(e){e.addEventListener("click",(function(){for(var e=0;e<s.intersects.length&&!s.intersects[e].object.parent.visible;)e++;if(s.intersects[e]){var t=s.intersects[e].object.parent;"Scene"!==t.type&&s.isolate(t)}s.contextMenu.style.visibility="hidden"}))})),this.controls.addEventListener("start",this.hideMenu),this.canvas.addEventListener("contextMenu",(function(e){if(e.detail.objects.length){var t=230;"catalog"===s.tabName&&(t=190),e.detail.mouseCoords.x+t>document.querySelector(".model-viewer").clientWidth?s.contextMenu.style.left=e.detail.mouseCoords.x-t+"px":s.contextMenu.style.left=e.detail.mouseCoords.x+5+"px",e.detail.mouseCoords.y+45>document.querySelector(".model-viewer").clientHeight?s.contextMenu.style.top=e.detail.mouseCoords.y-45+"px":s.contextMenu.style.top=e.detail.mouseCoords.y+"px",s.contextMenu.style.visibility="visible",document.querySelector("#annottation-collapse").classList.add("collapse"),s.intersects=e.detail.objects}})),document.querySelector("#Navbar").onclick=function(){s.hideMenu()},window.onresize=function(){s.hideMenu()}}return Object(l.a)(e,[{key:"fitToView",value:function(){for(var e=this,t=0;t<this.intersects.length&&!this.intersects[t].object.parent.visible;)t++;if(this.intersects[t]){var a=this.intersects[t].object.parent;if(!a)return;var n=new O.h;n.setFromObject(a);var i=new O.Kb;n.getSize(i);var s=Math.max(i.x,i.y,i.z)/(2*Math.tan(this.viewer.controls.object.fov*(Math.PI/360)));this.viewer.controls.object=this.viewer.scene.getObjectByName("__CatalogCamera");var o=this.viewer.camera,r=new O.jb,l=new O.Kb(0,0,-1);l.applyQuaternion(o.quaternion.clone()).normalize(),r.setFromNormalAndCoplanarPoint(l,this.viewer.controls.target);var c=new O.Kb,u=new O.Kb;n.getCenter(u),r.projectPoint(u,c);var h=c.sub(this.viewer.controls.target),d=o.position.clone().add(h),m=u.clone().sub(d);m.setLength(m.length()-1.8*s);var v=d.add(m),p=new O.Lb(".position",[0,.3],[].concat(Object(w.a)(o.position.toArray()),Object(w.a)(v.toArray())),O.G),f=new O.c(null,.3,[p]),b=this.viewer.catalogMixer.clipAction(f,o);b.loop=O.Q,b.play(),this.viewer.catalogMixer.addEventListener("finished",(function(t){t.action===b&&(t.action.stop(),e.viewer.camera.position.copy(v.clone()),e.viewer.controls.target.copy(u.clone()),e.viewer.controls.object=e.viewer.camera)}))}}},{key:"showObjects",value:function(){this.viewer.catalogMixer.stopAllAction(),this.viewer.catalogActions=[],this.viewer.model.traverse((function(e){"Mesh"!==e.type&&"LineSegments"!==e.type||(e.visible=!0,e.material.opacity=1,e.material.transparent=0)}));var e,t=Object(z.a)(this.hiddenParts);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.visible=!0;var n,i=Object(z.a)(a.children);try{for(i.s();!(n=i.n()).done;){n.value.visible=!0}}catch(s){i.e(s)}finally{i.f()}}}catch(s){t.e(s)}finally{t.f()}this.hiddenParts=[]}},{key:"hide",value:function(){for(var e=0;e<this.intersects.length&&!this.intersects[e].object.parent.visible;)e++;if(this.intersects[e]){var t=this.intersects[e].object.parent;"Scene"!==t.type&&(this.hiddenParts.push(t),t.visible=!1)}this.contextMenu.style.visibility="hidden"}},{key:"isolate",value:function(e){var t=this,a=[];e.traverse((function(e){"Mesh"!==e.type&&"LineSegments"!==e.type||a.push(e)})),this.viewer.model.traverse((function(e){"Mesh"!==e.type&&"LineSegments"!==e.type||a.indexOf(e)<0&&(e.visible=!1,t.hiddenParts.push())})),a.forEach((function(e){e.visible=!0})),this.viewer.catalogActions.forEach((function(e){return e.play()})),this.contextMenu.style.visibility="hidden"}},{key:"handleTabChange",value:function(e){this.tabName=e}}]),e}(),A=function(){function e(t,a){var n=this;Object(r.a)(this,e),this.lastPart=null,this.canvas=t,this.tabName=a,this.highlightMeshMaterial=new O.Y({color:3927397,roughness:1,metalness:0,side:O.s}),this.highlightLineMaterial=new O.I({color:204801}),this.canvas&&this.canvas.addEventListener("item_hovered",(function(e){if(e.detail.objects.length){for(var t=0;t<e.detail.objects.length&&!e.detail.objects[t].object.parent.visible;)t++;if(t<e.detail.objects.length&&e.detail.objects[t]){"ietm"===n.tabName?n.canvas.style.cursor="default":n.canvas.style.cursor="pointer";var a=e.detail.objects[t].object.parent;if("Scene"!==a.type&&a.visible&&"hidden"===document.querySelector("#context-menu").style.visibility&&n.lastPart!==a){if(n.lastPart){var i,s=Object(z.a)(n.lastPart.children);try{for(s.s();!(i=s.n()).done;){var o=i.value;n.toBack(o)}}catch(f){s.e(f)}finally{s.f()}}var r,l=Object(z.a)(a.children);try{for(l.s();!(r=l.n()).done;){var c=r.value;n.toFront(c)}}catch(f){l.e(f)}finally{l.f()}n.lastPart=a}}else if(n.lastPart){n.canvas.style.cursor="default";var u,h=Object(z.a)(n.lastPart.children);try{for(h.s();!(u=h.n()).done;){var d=u.value;n.toBack(d)}}catch(f){h.e(f)}finally{h.f()}n.lastPart=null}}else if(n.lastPart){n.canvas.style.cursor="default";var m,v=Object(z.a)(n.lastPart.children);try{for(v.s();!(m=v.n()).done;){var p=m.value;n.toBack(p)}}catch(f){v.e(f)}finally{v.f()}n.lastPart=null}}))}return Object(l.a)(e,[{key:"handleTabChange",value:function(e){this.tabName=e}},{key:"toFront",value:function(e){"ietm"!==this.tabName&&e.material.opacity&&(e._originalMaterial=e.material,e.renderOrder=999,"Mesh"===e.type?e.material=this.highlightMeshMaterial:e.material=this.highlightLineMaterial,e.onBeforeRender=function(e){e.clearDepth()},e.material.opacity=.5,e.material.transparent=!0)}},{key:"toBack",value:function(e){"ietm"!==this.tabName&&(e.renderOrder=6,e._originalMaterial&&(e.type,e.material=e._originalMaterial,e.onBeforeRender=function(e){}))}}]),e}(),P=a(69),T=a(20),F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this))._ambientLight=new O.b(16777215,.8),e.add(e._ambientLight),e._keyLight=new O.r(new O.o("hsl(30, 100%, 75%)"),.8),e._keyLight.position.set(-100,0,100),e.add(e._keyLight),e._fillLight=new O.r(new O.o("hsl(240, 100%, 75%)"),.8),e._fillLight.position.set(100,0,100),e.add(e._fillLight),e._backLight=new O.r(16777215,1),e._backLight.position.set(100,0,-100).normalize(),e.add(e._backLight),e._drawable=new O.r(new O.o("color"),1),e._drawable.position.set(-100,0,-100),e._drawable.visible=!1,e.add(e._drawable),e}return Object(l.a)(a,[{key:"add",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(e instanceof O.gb))throw new Error("Added object must be instance of THREE.Object3D");return t&&e.traverse((function(e){if("LineSegments"===e.type&&void 0!==e.material){var t=e.material.clone();e.material=t.clone()}if("Mesh"===e.type&&"cubeMesh"!==e.name&&void 0!==e.material){e.material.polygonOffset=!0,e.material.polygonOffsetFactor=.5,e.material.polygonOffsetUnits=1,e.material.color.convertSRGBToLinear();var a=e.material.clone();e.material=a.clone()}})),Object(P.a)(Object(T.a)(a.prototype),"add",this).call(this,e)}},{key:"switchRenderTo",value:function(){this._ambientLight.visible=!1,this._backLight.visible=!1,this._fillLight.visible=!1,this._keyLight.visible=!1,this._drawable.visible=!0,this.traverse((function(e){"LineSegments"===e.type&&(e.material.linewidth=1.5),"Mesh"===e.type&&(e.material=new O.Z,e.material.color=new O.o("white"),e.material.shininess=0)}))}},{key:"toggleStroke",value:function(){}}]),a}(O.xb),D=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).setPixelRatio(window.devicePixelRatio>1?1:window.devicePixelRatio),n.setClearColor(new O.o(16777215)),n.gammaFactor=2.2,n.gammaOutput=!0,n.powerPreference="high-performance",n.outputEncoding=O.w,n}return a}(O.Mb),q=a(45),Z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this))._boundBox=e.clone();var i=new O.Kb;return e.getSize(i),n._sizeX=i.x,n._sizeY=i.y,n._sizeZ=i.z,n.buildHelper(),n}return Object(l.a)(a,[{key:"buildHelper",value:function(){var e=new O.W({color:"blue",transparent:!0,opacity:.05,side:O.s}),t=new O.I({color:"black"});this._planeXYHelper=new O.z;var a=new O.kb(this._sizeX,this._sizeY);a.translate(this._sizeX/2,this._sizeY/2,0);var n=new O.V(a,e);this._planeXYHelper.add(n);var i=new O.x;i.vertices=[new O.Kb(0,0,0),new O.Kb(this._sizeX,0,0),new O.Kb(this._sizeX,this._sizeY,0),new O.Kb(0,this._sizeY,0),new O.Kb(0,0,0)];var s=new O.H(i,t);this._planeXYHelper.add(s),this._planeYZHelper=new O.z;var o=new O.kb(this._sizeZ,this._sizeY);o.translate(this._sizeZ/2,this._sizeY/2,0),o.rotateY(-Math.PI/2);var r=new O.V(o,e);this._planeYZHelper.add(r);var l=new O.x;l.vertices=[new O.Kb(0,0,0),new O.Kb(0,0,this._sizeZ),new O.Kb(0,this._sizeY,this._sizeZ),new O.Kb(0,this._sizeY,0),new O.Kb(0,0,0)];var c=new O.H(l,t);this._planeYZHelper.add(c),this._planeXZHelper=new O.z;var u=new O.kb(this._sizeX,this._sizeZ);u.translate(this._sizeX/2,this._sizeZ/2,0),u.rotateX(Math.PI/2);var h=new O.V(u,e);this._planeXZHelper.add(h);var d=new O.x;d.vertices=[new O.Kb(0,0,0),new O.Kb(0,0,this._sizeZ),new O.Kb(this._sizeX,0,this._sizeZ),new O.Kb(this._sizeX,0,0),new O.Kb(0,0,0)];var m=new O.H(d,t);this._planeXZHelper.add(m),this.add(this._planeXYHelper,this._planeXZHelper,this._planeYZHelper)}},{key:"moveYZ",value:function(e){e>1&&(e=1),e<0&&(e=0),this._planeYZHelper.position.x=this._sizeX*e}},{key:"moveXZ",value:function(e){e>1&&(e=1),e<0&&(e=0),this._planeXZHelper.position.y=this._sizeY*e}},{key:"moveXY",value:function(e){e>1&&(e=1),e<0&&(e=0),this._planeXYHelper.position.z=this._sizeZ*e}}]),a}(O.gb),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this)).name="__CrossSection",n._boundBox=new O.h,n._boundBox.setFromObject(e),n._sizes=new O.Kb,n._boundBox.getSize(n._sizes);var i=Math.max(n._sizes.y,n._sizes.x);i=Math.max(i,n._sizes.z),n._planes=[new O.jb(new O.Kb(-1,0,0),n._boundBox.min.x),new O.jb(new O.Kb(0,-1,0),n._boundBox.min.y),new O.jb(new O.Kb(0,0,-1),n._boundBox.min.z)];var s=[];e.traverse((function(e){if("Mesh"===e.type&&void 0!==e.material){var t=e.geometry.clone();e.updateWorldMatrix(!0,!0),e.renderOrder=6,e.material.clippingPlanes=n._planes,t.applyMatrix4(e.matrixWorld),s.push(t)}else"LineSegments"===e.type&&(e.material.clippingPlanes=n._planes)}));var o=q.a.mergeBufferGeometries(s),l=new O.z;l.name="__StencilGroups",n.add(l),n._planeObjects=[];for(var c=new O.kb(2*i,2*i),u=0;u<3;u++){var h=new O.z,d=n._planes[u],m=n.createPlaneStencilGroup(o,d,u+1);m.name="__StencilGroup"+u;var v=new O.Y({color:"#5c5c5c",clippingPlanes:n._planes.filter((function(e){return e!==d})),stencilWrite:!0,stencilRef:0,stencilFunc:O.eb,stencilFail:O.wb,stencilZFail:O.wb,stencilZPass:O.wb}),p=new O.V(c,v);p.onAfterRender=function(e){e.clearStencil()},p.renderOrder=u+1.1,l.add(m),h.add(p),h.name="__Caps"+u,n._planeObjects.push(p),n.add(h)}return n._update(),n._helper=new Z(n._boundBox),n._helper.position.copy(n._boundBox.min),n.add(n._helper),n._negate={x:!1,y:!1,z:!1},n.visible=!1,n}return Object(l.a)(a,[{key:"createPlaneStencilGroup",value:function(e,t,a){var n=new O.z,i=new O.W;i.depthWrite=!1,i.depthTest=!1,i.colorWrite=!1,i.stencilWrite=!0,i.stencilFunc=O.a;var s=i.clone();s.side=O.e,s.clippingPlanes=[t],s.stencilFail=O.A,s.stencilZFail=O.A,s.stencilZPass=O.A;var o=new O.V(e,s);o.renderOrder=a,n.add(o);var r=i.clone();r.side=O.v,r.clippingPlanes=[t],r.stencilFail=O.q,r.stencilZFail=O.q,r.stencilZPass=O.q;var l=new O.V(e,r);return l.renderOrder=a,n.add(l),n}},{key:"_update",value:function(){for(var e=0;e<this._planeObjects.length;e++){var t=this._planes[e],a=this._planeObjects[e];t.coplanarPoint(a.position),a.lookAt(a.position.x-t.normal.x,a.position.y-t.normal.y,a.position.z-t.normal.z)}}},{key:"moveYZ",value:function(e){e>1&&(e=1),e<0&&(e=0),this._negate.x?this._planes[0].constant=(1-e)*this._sizes.x-this._boundBox.max.x:this._planes[0].constant=e*this._sizes.x+this._boundBox.min.x,this._helper.moveYZ(e),this._update()}},{key:"negateYZ",value:function(){this._planes[0].negate(),this._negate.x=!this._negate.x,this._update()}},{key:"moveXZ",value:function(e){e>1&&(e=1),e<0&&(e=0),this._negate.y?this._planes[1].constant=(1-e)*this._sizes.y-this._boundBox.max.y:this._planes[1].constant=e*this._sizes.y+this._boundBox.min.y,this._helper.moveXZ(e),this._update()}},{key:"negateXZ",value:function(){this._planes[1].negate(),this._negate.y=!this._negate.y,this._update()}},{key:"moveXY",value:function(e){e>1&&(e=1),e<0&&(e=0),this._negate.z?this._planes[2].constant=(1-e)*this._sizes.z-this._boundBox.max.z:this._planes[2].constant=e*this._sizes.z+this._boundBox.min.z,this._helper.moveXY(e),this._update()}},{key:"negateXY",value:function(){this._planes[2].negate(),this._negate.z=!this._negate.z,this._update()}},{key:"toggleHelper",value:function(e){this._helper.visible=e||!this._helper.visible}}]),a}(O.gb),X=a(46),I=a(47);var K=function(e,t,a,n,i){var s=new X.a;s.manager.onProgress=function(e,t,a){i.style.display=t/a===1?"none":"inline-block"},s.setDRACOLoader((new I.a).setDecoderPath("/draco/")),s.load(e,(function(e){var a=(new O.h).setFromObject(e.scene),n=new O.Kb;a.getSize(n);var i=Math.max(n.x,n.y,n.z),s=new O.y(2*i,10),o=2*i/10,r=new O.Kb;a.getCenter(r),s.position.set(r.x,a.min.y,r.z),s.name="__Grid",e.scene.add(s);var l=new O.ib(30,1,.1,1e4),c=i/(2*Math.tan(l.fov*(Math.PI/360))),u=e.scene.getObjectByName("ManualCamera");u?(l.position.copy(u.position.clone()),l.rotation.copy(u.rotation.clone()),l.quaternion.copy(u.quaternion.clone())):l.position.set(c,c,c),l.name="__MainCamera";var h=new O.gb;h.position.copy(r.clone()),h.name="__MainTarget";var d=l.clone();d.name="__CatalogCamera";var m=h.clone();m.name="__CatalogTarget";var v=l.clone();v.name="__DefaultCamera";var p=h.clone();if(p.name="__DefaultTarget",e.scene.add(l,h,d,m,v,p),u){var f=u.getObjectByName("ManualCamera_Orientation").clone();f.name="__ManualCamera",f.position.copy(u.position.clone()),f.rotation.copy(u.rotation.clone()),f.quaternion.copy(u.quaternion.clone());var b=new O.gb,w=e.scene.getObjectByName("TrackTo");b.position.copy(w.position.clone()),b.name="__ManualTarget",e.scene.add(f,b)}t(e.scene,e.animations,o)}),(function(e){n&&n(e.loaded/e.total*100)}),(function(e){a&&a(e)}))};function V(e,t){var a=[];t.forEach((function(t){e.getObjectByName(t).traverse((function(e){if("Mesh"===e.type||"LineSegments"===e.type){var t=e.parent;a.indexOf(t)<0&&a.push(t)}}))}));var n=[];return e.traverse((function(e){if("Mesh"===e.type||"LineSegments"===e.type){var t=e.parent;a.indexOf(t)<0&&n.indexOf(t)<0&&n.push(t)}})),n.map((function(e){return e.name}))}var H=function(e,t){var a=[{name:V(e.getObjectByName("\u0411\u0430\u0440\u0430\u0431\u0430\u043d_\u0432_\u0441\u0431\u043e\u0440\u0435"),["\u0411\u0430\u0440\u0430\u0431\u0430\u043d","\u0412\u0430\u043b_\u0431\u0430\u0440\u0430\u0431\u0430\u043d\u0430","ISO_355_-_3DE_-_75_x_125_x_37001","\u041a\u043e\u043b\u044c\u0446\u043e","\u041a\u0430\u043d\u0430\u0442","\u0420\u0430\u0441\u043f\u043e\u0440\u043a\u0430_(1)","ISO_4032_-_M20_-_ISO007","ISO_4032_-_M20_-_ISO006","ISO_4032_-_M20_-_ISO005","ISO_4032_-_M20_-_ISO004","ISO_355_-_3DE_-_75_x_125_x_37"]),visible:{times:[163.9,164,168,184,188],values:[0,1,.5,.5,1]},transparent:{times:[163.9,164,168,184,188],values:[!1,!0,!0,!0,!1]},actions:[]},{name:["\u0411\u0430\u0440\u0430\u0431\u0430\u043d_\u0432_\u0441\u0431\u043e\u0440\u0435"],visible:{times:[0,2],values:[0,1]},transparent:{times:[0,2],values:[!0,!1]},highlight:{times:[2,2.5,3,3.5,4],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0411\u0430\u0440\u0430\u0431\u0430\u043d","\u0412\u0430\u043b_\u0431\u0430\u0440\u0430\u0431\u0430\u043d\u0430"],highlight:{times:[172,172.5,173,173.5,174],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435"],visible:{times:[0,8,10],values:[0,0,1]},transparent:{times:[0,10],values:[!0,!1]},highlight:{times:[10,10.5,11,11.5,12],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(2)"],visible:{times:[0,8,10],values:[0,0,1]},transparent:{times:[0,10],values:[!0,!1]},highlight:{times:[10,10.5,11,11.5,12],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(3)"],visible:{times:[0,8,10],values:[0,0,1]},transparent:{times:[0,10],values:[!0,!1]},highlight:{times:[10,10.5,11,11.5,12],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(4)"],visible:{times:[0,8,10],values:[0,0,1]},transparent:{times:[0,10],values:[!0,!1]},highlight:{times:[10,10.5,11,11.5,12],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:V(e.getObjectByName("\u0420\u0435\u0434\u0443\u043a\u0442\u043e\u0440"),["\u041a\u043e\u0440\u043f\u0443\u0441","\u041a\u043e\u043b\u0435\u0441\u043e","\u0428\u0435\u0441\u0442\u0435\u0440\u043d\u044f","ISO_355_-_2CE_-_35_x_62_x_21001","ISO_355_-_2CE_-_35_x_62_x_21","\u0412\u0445\u043e\u0434\u043d\u043e\u0439_\u0432\u0430\u043b","\u0412\u044b\u0445\u043e\u0434\u043d\u043e\u0439_\u0432\u0430\u043b","ISO_355_-_4DB_-_45_x_85_x_21","ISO_355_-_4DB_-_45_x_85_x_21001"]),visible:{times:[115.9,116,120,164,168,184,188],values:[0,1,0,0,.5,.5,1]},transparent:{times:[115.9,116,120,184,188],values:[!1,!0,!0,!0,!1]},actions:[]},{name:["\u0428\u0435\u0441\u0442\u0435\u0440\u043d\u044f","\u0412\u0445\u043e\u0434\u043d\u043e\u0439_\u0432\u0430\u043b"],highlight:{times:[124,124.5,125,125.5,126],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0428\u0435\u0441\u0442\u0435\u0440\u043d\u044f","\u041a\u043e\u043b\u0435\u0441\u043e"],highlight:{times:[148,148.5,149,149.5,150],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0412\u044b\u0445\u043e\u0434\u043d\u043e\u0439_\u0432\u0430\u043b","\u041a\u043e\u043b\u0435\u0441\u043e"],highlight:{times:[172,172.5,173,173.5,174],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0434\u0443\u043a\u0442\u043e\u0440"],visible:{times:[0,16,18],values:[0,0,1]},transparent:{times:[0,18],values:[!0,!1]},highlight:{times:[18,18.5,19,19.5,20],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(9)"],visible:{times:[0,24,26],values:[0,0,1]},transparent:{times:[0,26],values:[!0,!1]},highlight:{times:[26,26.5,27,27.5,28],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(10)"],visible:{times:[0,24,26],values:[0,0,1]},transparent:{times:[0,26],values:[!0,!1]},highlight:{times:[26,26.5,27,27.5,28],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(11)"],visible:{times:[0,24,26],values:[0,0,1]},transparent:{times:[0,26],values:[!0,!1]},highlight:{times:[26,26.5,27,27.5,28],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(12)"],visible:{times:[0,24,26],values:[0,0,1]},transparent:{times:[0,26],values:[!0,!1]},highlight:{times:[26,26.5,27,27.5,28],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u041c\u0443\u0444\u0442\u0430"],visible:{times:[0,32,34],values:[0,0,1]},transparent:{times:[0,34],values:[!0,!1]},highlight:{times:[34,34.5,35,35.5,36,172,172.5,173,173.5,174],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null,null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["DIN_6885_-_A_10_x_8_x_22"],visible:{times:[0,40,42],values:[0,0,1]},transparent:{times:[0,42],values:[!0,!1]},actions:[]},{name:["DIN_6885_-_A_10_x_8_x_45"],visible:{times:[0,40,42],values:[0,0,1]},transparent:{times:[0,42],values:[!0,!1]},actions:[]},{name:["\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"],visible:{times:[115.9,116,120,184,188],values:[0,1,.1,.1,1]},transparent:{times:[115.9,116,120,184,188],values:[!1,!0,!0,!0,!1]},actions:[]},{name:["\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"],visible:{times:[0,40,42],values:[0,0,1]},transparent:{times:[0,42],values:[!0,!1]},highlight:{times:[42,42.5,43,43.5,44],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(5)"],visible:{times:[0,48,50],values:[0,0,1]},transparent:{times:[0,50],values:[!0,!1]},highlight:{times:[50,50.5,51,51.5,52],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(6)"],visible:{times:[0,48,50],values:[0,0,1]},transparent:{times:[0,50],values:[!0,!1]},highlight:{times:[50,50.5,51,51.5,52],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(7)"],visible:{times:[0,48,50],values:[0,0,1]},transparent:{times:[0,50],values:[!0,!1]},highlight:{times:[50,50.5,51,51.5,52],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(8)"],visible:{times:[0,48,50],values:[0,0,1]},transparent:{times:[0,50],values:[!0,!1]},highlight:{times:[50,50.5,51,51.5,52],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:V(e.getObjectByName("\u0414\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044c"),["\u0420\u043e\u0442\u043e\u0440","\u041e\u0431\u043c\u043e\u0442\u043a\u0430","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(2)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(3)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(4)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(5)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(6)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(7)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(8)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(9)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(10)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(11)","\u041e\u0431\u043c\u043e\u0442\u043a\u0430_(12)"]),visible:{times:[91.9,92,96,112,116],values:[0,1,.1,.1,1]},transparent:{times:[91.9,92,96,112,116],values:[!1,!0,!0,!0,!1]},actions:[]},{name:["\u0420\u043e\u0442\u043e\u0440"],highlight:{times:[100,100.5,101,101.5,102],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0414\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044c"],visible:{times:[0,56,58],values:[0,0,1]},transparent:{times:[0,58],values:[!0,!1]},highlight:{times:[58,58.5,59,59.5,60],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(13)"],visible:{times:[0,64,66],values:[0,0,1]},transparent:{times:[0,66],values:[!0,!1]},highlight:{times:[66,66.5,67,67.5,68],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(14)"],visible:{times:[0,64,66],values:[0,0,1]},transparent:{times:[0,66],values:[!0,!1]},highlight:{times:[66,66.5,67,67.5,68],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(15)"],visible:{times:[0,64,66],values:[0,0,1]},transparent:{times:[0,66],values:[!0,!1]},highlight:{times:[66,66.5,67,67.5,68],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u0437\u044c\u0431\u043e\u0432\u043e\u0435_\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435_(16)"],visible:{times:[0,64,66],values:[0,0,1]},transparent:{times:[0,66],values:[!0,!1]},highlight:{times:[66,66.5,67,67.5,68],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["DIN_6885_-_A_8_x_7_x_40_001"],visible:{times:[0,70,72],values:[0,0,1]},transparent:{times:[0,72],values:[!0,!1]},actions:[]},{name:["\u0428\u043a\u0438\u0432_\u0432\u0435\u0434\u0443\u0449\u0438\u0439"],visible:{times:[0,70,72],values:[0,0,1]},transparent:{times:[0,72],values:[!0,!1]},highlight:{times:[72,72.5,73,73.5,74,100,100.5,101,101.5,102],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null,null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["DIN_6885_-_A_8_x_7_x_40_"],visible:{times:[0,76,78],values:[0,0,1]},transparent:{times:[0,78],values:[!0,!1]},actions:[]},{name:["\u0428\u043a\u0438\u0432_\u0432\u0435\u0434\u043e\u043c\u044b\u0439"],visible:{times:[0,76,78],values:[0,0,1]},transparent:{times:[0,78],values:[!0,!1]},highlight:{times:[78,78.5,79,79.5,80,124,124.5,125,125.5,126],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null,null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u043c\u0435\u043d\u044c"],visible:{times:[0,82,84],values:[0,0,1]},transparent:{times:[0,84],values:[!0,!1]},highlight:{times:[84,84.5,85,85.5,86],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]},{name:["\u0420\u0435\u043c\u0435\u043d\u044c_(2)"],visible:{times:[0,82,84],values:[0,0,1]},transparent:{times:[0,84],values:[!0,!1]},highlight:{times:[84,84.5,85,85.5,86],values:[null,new O.o("#ffff00"),null,new O.o("#ffff00"),null]},actions:[]}];a.forEach((function(a){a.name.forEach((function(n){e.getObjectByName(n).traverse((function(e){if("Mesh"===e.type||"LineSegments"===e.type){var n=new O.c(null,-1,[]);if(a.highlight){var i=e.material.color.clone(),s=a.highlight.values.flatMap((function(e){var t=null===e?i:e;return[t.r,t.g,t.b]})),o=new O.p(".color",a.highlight.times,s);n.tracks.push(o)}if(a.visible){var r=new O.fb(".opacity",a.visible.times,a.visible.values);n.tracks.push(r)}if(a.transparent){var l=new O.g(".transparent",a.transparent.times,a.transparent.values);n.tracks.push(l)}n.resetDuration();var c=t.clipAction(n,e.material);c.loop=O.Q,a.actions.push(c)}}))}))}));var n=new O.gb;n.name="__StepHelper",e.add(n);var i=new O.fb(".x",[0,8,16,24,32,40,48,56,64,70,88,92,116,140,164],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]);i.interpolation=O.E;var s=new O.c(null,-1,[i]);s.duration=200;var o=t.clipAction(s,n.position),r=[];return r.push(o),a.forEach((function(e){return r.push.apply(r,Object(w.a)(e.actions))})),r},R=function(){function e(t,a,n,i){var s=this;for(var o in Object(r.a)(this,e),this.onAddButtonClicked=function(e){e.stopPropagation();var t=document.querySelector("#annotation-text").value;if(t){var a=new O.V;a.text=t,a.position.set(s.currentPoint.position.x,s.currentPoint.position.y,s.currentPoint.position.z),s.scene.add(a),s.currentObject.attach(a),s.annotations.push(a),s.displayAnnotation(s.annotations.length-1),document.querySelector("#annotation-text").value="",document.querySelector("#context-menu").style.visibility="hidden"}},this.onItemClicked=function(e){s.intersects=e.detail.objects;for(var t=0;t<s.intersects.length&&!s.intersects[t].object.parent.visible;)t++;if(s.intersects[t]&&"Scene"!==s.intersects[t].object.parent.type){var a=e.detail.objects[t].point;s.currentPoint.position.set(a.x,a.y,a.z),s.currentObject=e.detail.objects[t].object.parent}},this.camera=t,this.currentPoint=new O.gb,this.canvas=a,this.intersects=null,this.annotations=[],this.viewerDiv=n,this.scene=i,this.currentObject=null,this.setStateFlag=!1,this.annotations)this.displayAnnotation(o);this.p2=new O.Kb,document.querySelector("#button-add-annotation").addEventListener("click",this.onAddButtonClicked),a.addEventListener("item_clicked",this.onItemClicked)}return Object(l.a)(e,[{key:"onRemoveButtonClicked",value:function(e){this.removeAnnotation(+document.querySelector("#index").value-1)}},{key:"update",value:function(){for(var e in this.annotations)this.p2=this.annotations[e].getWorldPosition(),this.camera.position.equals(this.p2)||(this.p2.project(this.camera),this.p2.x=this.p2.x*this.viewerDiv.width/2+this.viewerDiv.width/2,this.p2.y=-this.p2.y*this.viewerDiv.height/2+this.viewerDiv.height/2,document.querySelector("#annotation-"+e).style.left=this.p2.x+"px",document.querySelector("#annotation-"+e).style.top=this.p2.y+"px",document.querySelector("#annotation-index-"+e).style.left=this.p2.x-15+"px",document.querySelector("#annotation-index-"+e).style.top=this.p2.y-15+"px");this.changeVisibilityOfAnnotations()}},{key:"displayAnnotation",value:function(e){var t=this,a=document.createElement("div");a.id="annotation-"+e,a.classList.add("annotation","hidden"),document.querySelector(".model-viewer").appendChild(a);var n=document.createElement("p");n.id="annotation-text-"+e,n.style.margin="0px",a.appendChild(n);var i=document.createElement("div");i.id="annotation-index-"+e,i.classList.add("annotation-number"),i.classList.add("unselectable"),i.innerText=+e+1,i.addEventListener("click",(function(){return t.hideAnnotation(e)})),document.querySelector(".model-viewer").appendChild(i)}},{key:"removeAnnotation",value:function(e){for(var t=e;t<this.annotations.length;t++)document.querySelector("#annotation-"+t).remove(),document.querySelector("#annotation-index-"+t).remove();this.annotations.splice(e,1);for(var a=e;a<this.annotations.length;a++)this.displayAnnotation(a)}},{key:"hideAnnotation",value:function(e){var t=document.querySelector("#annotation-"+e),a=t.classList.contains("hidden");document.querySelector("#annotation-text-"+e).innerHTML=a?this.annotations[e].text:"",a?t.classList.remove("hidden"):t.classList.add("hidden")}},{key:"getClosestAnnotation",value:function(){var e,t=Math.pow(2,32);for(var a in this.annotations){var n=this.camera.position,i=this.annotations[a],s=Math.sqrt(Math.pow(n.x-i.position.x,2)+Math.pow(n.y-i.position.y,2)+Math.pow(n.z-i.position.z,2));t>s&&(t=s,e=+a)}return e}},{key:"changeVisibilityOfAnnotations",value:function(){for(var e in this.annotations)document.querySelector("#annotation-"+e).style.zIndex=this.getClosestAnnotation()===e?1001:1e3,document.querySelector("#annotation-index-"+e).style.zIndex=this.getClosestAnnotation()===e?1001:1e3}},{key:"setViewerSizes",value:function(e){this.viewerDiv=e}},{key:"hideAllAnnotations",value:function(){if(!this.setStateFlag)for(var e in this.annotations)document.querySelector("#annotation-"+e).classList.add("hidden"),document.querySelector("#annotation-index-"+e).classList.add("hidden");this.setStateFlag=!0}},{key:"showAllAnnotations",value:function(){if(this.setStateFlag){for(var e in this.annotations)this.hideAnnotation(e),document.querySelector("#annotation-index-"+e).classList.remove("hidden");this.setStateFlag=!1}}},{key:"deleteAllAnnotations",value:function(){for(var e in this.annotations){document.querySelector("#annotation-"+e).remove(),document.querySelector("#annotation-index-"+e).remove()}this.annotations=[]}},{key:"setCamera",value:function(e){this.camera=e}}]),e}(),W=a(49),G=a.n(W),U=a(51),J=a.n(U),Q=a(52),$=a.n(Q),ee=a(53),te=a.n(ee),ae=a(36),ne=a.n(ae),ie=a(56),se=a.n(ie),oe=a(58),re=a.n(oe),le=a(59),ce=a.n(le),ue=a(57),he=a.n(ue),de=a(55),me=a.n(de),ve=a(54),pe=a.n(ve);function fe(e){var t=~~(e/1e3)%60;return"".concat(~~(e/1e3%3600/60),":").concat(t<10?"0".concat(t):t)}var be=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).animate=function(){n.resizeCanvas(),requestAnimationFrame(n.animate);var e=n.viewer.clock.getDelta();if(n.viewer.mixer&&n.state.data.play&&2===n.props.state&&(n.viewer.mixer.update(3*e),n.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{data:Object(E.a)(Object(E.a)({},e.data),{},{time:n.viewer.mixer.time})})}))),n.viewer.catalogMixer&&n.viewer.catalogMixer.update(e),n.castRays(),n.viewer.intersects){var t=new CustomEvent("item_hovered",{detail:{objects:n.viewer.intersects}});n.viewer.renderer.domElement.dispatchEvent(t)}n.viewer.controls.update(),n.annotationsExt&&(0===n.props.state?(n.annotationsExt.showAllAnnotations(),n.annotationsExt.update()):n.annotationsExt.hideAllAnnotations()),n.viewer.renderer.render(n.viewer.scene,n.viewer.camera)},n.changeState=function(e,t){"boolean"===typeof n.state.data[t]?n.setState({data:Object(E.a)(Object(E.a)({},n.state.data),{},Object(x.a)({},t,!n.state.data[t]))}):n.setState({data:Object(E.a)(Object(E.a)({},n.state.data),{},Object(x.a)({},t,e.target.value))})},n.menuButtonClicked=function(e){var t=e.target.dataset.title;if(t)switch(t){case n.state.mode:return void n.setState({mode:"view"});case"restoreView":var a=n.viewer.scene.getObjectByName("__DefaultCamera");return n.viewer.camera.position.copy(a.position.clone()),n.viewer.camera.rotation.copy(a.rotation.clone()),n.viewer.camera.quaternion.copy(a.quaternion.clone()),n.viewer.controls.target.copy(n.viewer.scene.getObjectByName("__DefaultTarget").position.clone()),void n.setState(Object(E.a)(Object(E.a)({},n.initialState),{},{initialized:!0}));case"cut":n.setState({data:Object(E.a)(Object(E.a)({},n.state.data),{},{explosion:0}),mode:t});break;case"fullscreen":n.toogleFullscreenMode();break;default:n.setState({mode:t})}},n.toogleFullscreenMode=function(e){if(void 0===e||27===e.keyCode){n.props.stores.tabsFlagStore.fullscreen=!n.props.stores.tabsFlagStore.fullscreen;var t=document.getElementById("container"),a=document.querySelector(".fulscreen-popup-info");t.classList.contains("fullscreen")?(t.classList.remove("fullscreen"),n.offset.top=document.querySelector("#Navbar").clientHeight+document.querySelector("#Nav").clientHeight,document.removeEventListener("keydown",n.toogleFullscreenMode),clearTimeout(n.timer),a.classList.remove("fade-out"),a.classList.remove("fade-in")):(t.classList.add("fullscreen"),document.addEventListener("keydown",n.toogleFullscreenMode),n.offset.top=0,a.classList.remove("fade-out"),a.classList.add("fade-in"),n.timer=setTimeout((function(){a.classList.remove("fade-in"),a.classList.add("fade-out")}),2500))}},n.additionalMenu=function(){switch(n.state.mode){case"rotate":return n.menuRotate();case"space":return n.menuModelSpacing();case"cut":return n.menuModelSection();default:return i.a.createElement("div",null)}},n.menuRotate=function(){return i.a.createElement("form",{className:"text-centered rotation-form edit-block"},i.a.createElement("div",{className:"flex-group"},i.a.createElement("input",{type:"checkbox",id:"checkbox-rotation",checked:n.state.data.rotate,onChange:function(e){return n.changeState(e,"rotate")}}),i.a.createElement("label",{className:"form-check-label",htmlFor:"checkbox-rotation"},n.props.t("viewer.mainMenu.rotate.autoRotate"))),i.a.createElement("hr",null),i.a.createElement("div",{className:"flex-group"},i.a.createElement("label",{htmlFor:"range-rotation"}," ",n.props.t("viewer.mainMenu.rotate.velocity")),i.a.createElement("input",{onChange:function(e){return n.changeState(e,"rotateSpeed")},type:"range",className:"form-control-range",id:"range-rotation",value:n.state.data.rotateSpeed,min:0,max:50,step:1})))},n.menuModelSpacing=function(){return i.a.createElement("form",{className:"text-centered spacing-form edit-block"},i.a.createElement("div",{className:"flex-group"},i.a.createElement("label",{htmlFor:"range-explosion"},n.props.t("viewer.mainMenu.explode.power")),i.a.createElement("input",{onChange:function(e){return n.changeState(e,"explosion")},type:"range",className:"form-control-range",id:"range-explosion",value:n.state.data.explosion,min:0,max:5,step:.1})))},n.menuModelSection=function(){return i.a.createElement("form",{className:"text-centered spacing-form edit-block"},i.a.createElement("div",{className:"flex-group"},i.a.createElement("input",{type:"checkbox",id:"checkbox-cut",checked:n.state.data.cut,onChange:function(e){return n.changeState(e,"cut")}}),i.a.createElement("label",{className:"form-check-label",htmlFor:"checkbox-cut"},n.props.t("viewer.mainMenu.cut.activate"))),i.a.createElement("hr",null),i.a.createElement("div",{className:"flex-group"},i.a.createElement("input",{type:"checkbox",id:"checkbox-cut-show",checked:n.state.data.helper,onChange:function(e){return n.changeState(e,"helper")}}),i.a.createElement("label",{className:"form-check-label",htmlFor:"checkbox-cut-show"},n.props.t("viewer.mainMenu.cut.showPlanes"))),i.a.createElement("hr",null),i.a.createElement("label",{style:{margin:"0"}},n.props.t("viewer.mainMenu.cut.planes")),i.a.createElement("div",{className:"flex-group"},i.a.createElement("label",{className:"form-check-label",htmlFor:"range-cutX"},"XYZ"),i.a.createElement("input",{onChange:function(e){return n.changeState(e,"planeX")},type:"range",className:"form-control-range check-invert",id:"range-cutX",value:n.state.data.planeX,min:0,max:1,step:.01})),i.a.createElement("div",{className:"flex-group"},i.a.createElement("input",{id:"checkbox-invX",type:"checkbox",checked:n.state.data.invertX,onChange:function(e){return n.changeState(e,"invertX")}}),i.a.createElement("span",null,n.props.t("viewer.mainMenu.cut.invert"))),i.a.createElement("div",{className:"flex-group"},i.a.createElement("label",{className:"form-check-label",htmlFor:"range-cutY"},"ZXY"),i.a.createElement("input",{onChange:function(e){return n.changeState(e,"planeY")},type:"range",className:"form-control-range",id:"range-cutY",value:n.state.data.planeY,min:0,max:1,step:.01})),i.a.createElement("div",{className:"flex-group"},i.a.createElement("input",{id:"checkbox-invY",type:"checkbox",checked:n.state.data.invertY,onChange:function(e){return n.changeState(e,"invertY")}}),i.a.createElement("span",null,n.props.t("viewer.mainMenu.cut.invert"))),i.a.createElement("div",{className:"flex-group"},i.a.createElement("label",{className:"form-check-label",htmlFor:"range-cutZ"},"YXZ"),i.a.createElement("input",{onChange:function(e){return n.changeState(e,"planeZ")},type:"range",className:"form-control-range",id:"range-cutZ",value:n.state.data.planeZ,min:0,max:1,step:.01})),i.a.createElement("div",{className:"flex-group"},i.a.createElement("input",{id:"checkbox-invZ",type:"checkbox",checked:n.state.data.invertZ,onChange:function(e){return n.changeState(e,"invertZ")}}),i.a.createElement("span",null,n.props.t("viewer.mainMenu.cut.invert"))))},n.viewer=e.stores.threeOptionsStore.viewData,n.state={initialized:!1,mode:"view",data:{rotate:!1,rotateSpeed:2,annotationText:"\u0414\u0435\u0442\u0430\u043b\u044c",explosion:0,cut:!1,helper:!0,planeX:.5,planeY:.5,planeZ:.5,invertX:!0,invertY:!0,invertZ:!0,time:0,duration:200,play:!1,scale:0},annotations:[],annotationName:"",annotationText:"",isfsPopupShown:!0},n.initialState=Object(E.a)({},n.state),n.handleUpdate=n.handleUpdate.bind(Object(j.a)(n)),e.stores.threeOptionsStore.clearData=n.clearData.bind(Object(j.a)(n)),n}return Object(l.a)(a,[{key:"handleUpdate",value:function(e){this.setState((function(t){return Object(E.a)(Object(E.a)({},t),{},{data:Object(E.a)(Object(E.a)({},t.data),e)})}))}},{key:"componentDidMount",value:function(){var e=this;this.setupViewer(this.props.glb,(function(){e.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{initialized:!0,data:Object(E.a)({},e.data)})})),e.startViewer(),e.initExtensions()}))}},{key:"clearData",value:function(){var e=Object(_.a)(y.a.mark((function e(){var t=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState(Object(E.a)(Object(E.a)({},this.initialState),{},{initialized:!0}),(function(){t.explode(t.viewer.model)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"explode",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new O.Kb,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e&&e instanceof O.gb){e._originalPosition||(e.updateWorldMatrix(!0,!0),e._originalPosition=e.position.clone());var s=new O.Kb;if(0===i)s.copy(e._originalPosition.clone());else if(1===i){var o=e.parent.worldToLocal(n.clone());s.copy(e._originalPosition.clone().sub(o).multiplyScalar(5))}else s.copy(e._originalPosition.clone().multiplyScalar(5));e._explode={from:e._originalPosition.clone(),to:s};var r=a/5,l=e._explode.from.clone();l.lerp(e._explode.to,r),e.position.copy(l),e.children.forEach((function(s){e.children.length>1?"Mesh"!==e.children[0].type&&"LineSegments"!==e.children[0].type&&t.explode(s,a,n,i+1):t.explode(s,a,n,i+1)}))}}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.state.initialized){this.props.glb!==e.glb&&this.setupViewer(this.props.glb,(function(){a.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{initialized:!0,data:Object(E.a)({},e.data)})})),a.startViewer()})),0===this.state.data.scale&&this.setState({data:Object(E.a)(Object(E.a)({},this.state.data),{},{scale:t.data.scale})});var n=this.props.stores.tabsFlagStore.tabsData.info.active;if(this.hilightPartsExt&&this.hilightPartsExt.handleTabChange(n),this.contextMenu&&this.contextMenu.handleTabChange(n),"ietm"===n&&this.state===t&&(this.initialState.data.time=this.state.data.time,this.initialState.data.scale=this.state.data.scale,this.setState(Object(E.a)(Object(E.a)({},this.initialState),{},{initialized:!0}))),t.data.explosion!==this.state.data.explosion){this.explode(this.viewer.catalogRoot,this.state.data.explosion,this.viewer.plant),this._modelBoundingBox=(new O.h).setFromObject(this._model);var i=this._modelBoundingBox.getSize();this.viewer.scene.remove(this.boxMesh);var s=new O.i(i.x,i.y,i.z),o=new O.W({color:65280,transparent:!0,opacity:0});this.boxMesh=new O.V(s,o);var r=this._modelBoundingBox.getCenter(new O.Kb);this.boxMesh.name="cubeMesh",this.viewer.scene.add(this.boxMesh,!1),this.boxMesh.geometry.translate(r.x,r.y,r.z)}if(t.data.rotate!==this.state.data.rotate&&(this.viewer.controls.autoRotate=this.state.data.rotate,this.viewer.controls.autoRotateSpeed=-this.state.data.rotateSpeed),t.data.rotateSpeed!==this.state.data.rotateSpeed&&this.state.data.rotate&&(this.viewer.controls.autoRotateSpeed=-this.state.data.rotateSpeed),t.data.cut!==this.state.data.cut&&(this.viewer.renderer.localClippingEnabled=this.state.data.cut,this._crossSectionTool.visible=this.state.data.cut),t.data.planeX!==this.state.data.planeX&&this._crossSectionTool.moveYZ(this.state.data.planeX),t.data.planeY!==this.state.data.planeY&&this._crossSectionTool.moveXZ(this.state.data.planeY),t.data.planeZ!==this.state.data.planeZ&&this._crossSectionTool.moveXY(this.state.data.planeZ),t.data.helper!==this.state.data.helper&&this._crossSectionTool.toggleHelper(this.state.data.helper),t.data.invertX!==this.state.data.invertX&&this._crossSectionTool.negateYZ(),t.data.invertY!==this.state.data.invertY&&this._crossSectionTool.negateXZ(),t.data.invertZ!==this.state.data.invertZ&&this._crossSectionTool.negateXY(),t.data.play!==this.state.data.play&&2===this.props.state&&(this.viewer.mixer.timeScale=this.state.data.play?1:0),this.state.data.play&&!0===t.data.play&&2===this.props.state)t.data.time!==this.state.data.time&&(this.viewer.mixer.setTime(this.state.data.time),this.viewer.actions.forEach((function(e){e.reset(),e.time=a.state.data.time,e.play()})),this.viewer.mixer.timeScale=1,this.viewer.mixer.update(1e-5)),this.viewer.step=this.viewer.scene.getObjectByName("__StepHelper").position.x;else if(this.state.data.play&&!1===t.data.play&&2===this.props.state)this.viewer.actions.forEach((function(e){e.enabled=!0,e.paused=!1,e.play()})),this.viewer.camera=this.viewer.scene.getObjectByName("ManualCamera_Orientation");else if(this.state.data.play&&2!==this.props.state){var l=this.viewer.scene.getObjectByName("__ManualCamera"),c=this.viewer.scene.getObjectByName("ManualCamera");l.position.copy(c.position.clone()),l.rotation.copy(c.rotation.clone()),l.quaternion.copy(c.quaternion.clone()),this.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{data:Object(E.a)(Object(E.a)({},e.data),{},{play:!1})})}))}else if(!1===this.state.data.play&&!0===t.data.play&&2===this.props.state){this.viewer.scene.getObjectByName("__ManualTarget").position.copy(this.viewer.scene.getObjectByName("TrackTo").position.clone());var u=this.viewer.scene.getObjectByName("__ManualCamera"),h=this.viewer.scene.getObjectByName("ManualCamera");u.position.copy(h.position.clone()),u.rotation.copy(h.rotation.clone()),u.quaternion.copy(h.quaternion.clone()),this.viewer.camera=u,this.viewer.controls.object=u,this.viewer.controls.target.copy(this.viewer.scene.getObjectByName("__ManualTarget").position.clone()),this.viewer.mixer.update(1/60)}else!1===this.state.data.play&&!1===t.data.play&&2===this.props.state?(t.data.time!==this.state.data.time&&(this.viewer.mixer.setTime(this.state.data.time),this.viewer.step=this.viewer.scene.getObjectByName("__StepHelper").position.x,this.viewer.actions.forEach((function(e){e.reset(),e.time=a.state.data.time,e.enabled=!0,e.paused=!1,e.play()})),this.viewer.mixer.timeScale=1,this.viewer.mixer.update(.01)),this.viewer.mixer.time>.01&&(this.viewer.actions.forEach((function(e){e.time=a.viewer.mixer.time,e.enabled=!0,e.paused=!1})),this.viewer.mixer.timeScale=1,this.viewer.mixer.update(1e-5))):!1===this.state.data.play&&2!==this.props.state&&(this.viewer.actions.forEach((function(e){e.time=a.viewer.mixer.time,e.enabled=!1,e.paused=!0})),this.viewer.mixer.timeScale=1,this.viewer.mixer.update(1e-5))}if(e.state!==this.props.state)switch(this.props.state){case 1:0===e.state&&this.viewer.scene.getObjectByName("__MainTarget").position.copy(this.viewer.controls.target.clone()),2===e.state&&this.viewer.scene.getObjectByName("__ManualTarget").position.copy(this.viewer.controls.target.clone()),this.viewer.camera=this.viewer.scene.getObjectByName("__CatalogCamera"),this.viewer.controls.object=this.viewer.camera,this.viewer.controls.target.copy(this.viewer.scene.getObjectByName("__CatalogTarget").position.clone());break;case 2:1===e.state&&this.viewer.scene.getObjectByName("__CatalogTarget").position.copy(this.viewer.controls.target.clone()),0===e.state&&this.viewer.scene.getObjectByName("__MainTarget").position.copy(this.viewer.controls.target.clone()),this.viewer.camera=this.viewer.scene.getObjectByName("__ManualCamera"),this.viewer.controls.object=this.viewer.camera,this.viewer.controls.target.copy(this.viewer.scene.getObjectByName("__ManualTarget").position.clone());break;default:1===e.state&&this.viewer.scene.getObjectByName("__CatalogTarget").position.copy(this.viewer.controls.target.clone()),2===e.state&&this.viewer.scene.getObjectByName("__ManualTarget").position.copy(this.viewer.controls.target.clone()),this.viewer.camera=this.viewer.scene.getObjectByName("__MainCamera"),this.viewer.controls.object=this.viewer.camera,this.viewer.controls.target.copy(this.viewer.scene.getObjectByName("__MainTarget").position.clone())}}},{key:"setupViewer",value:function(e,t){var a=this;this.annotationsExt&&this.annotationsExt.deleteAllAnnotations(),this.contextMenu&&(this.contextMenu.hiddenParts=[],this.contextMenu.hideMenu()),this.viewer.scene=new F;var n=document.querySelector(".lds-ring");n.style.display="inline-block",K(e,(function(e,n,i){a.viewer.scene.add(e),a.viewer.model=e.children[0],a._model=e.children[0],a._modelBoundingBox=(new O.h).setFromObject(a._model),a.raycaster=new O.ub,a.target=new O.Jb;var s=a._modelBoundingBox.getSize(),o=new O.i(s.x,s.y,s.z),r=new O.W({color:65280,transparent:!0,opacity:0});a.boxMesh=new O.V(o,r);var l=a._modelBoundingBox.getCenter(new O.Kb);a.boxMesh.name="cubeMesh",a.viewer.scene.add(a.boxMesh,!1),a.boxMesh.geometry.translate(l.x,l.y,l.z),a.inverseMatrix=new O.U,a.ray=new O.tb,a.inverseMatrix.getInverse(a.boxMesh.matrixWorld),a._crossSectionTool=new Y(a.viewer.model),a._crossSectionTool.moveXY(.5),a._crossSectionTool.moveXZ(.5),a._crossSectionTool.moveYZ(.5),a._crossSectionTool.negateXY(),a._crossSectionTool.negateXZ(),a._crossSectionTool.negateYZ(),a.viewer.scene.add(a._crossSectionTool,!1),a.viewer.catalogRoot=a.viewer.model;var c=new O.h;c.setFromObject(a.viewer.catalogRoot);var u=new O.Kb;c.getCenter(u),a.viewer.plant.copy(new O.Kb(u.x,c.min.y,u.z)),a.explode(a.viewer.catalogRoot,0,a.viewer.plant),a.viewer.mixer=new O.d(null),a.viewer.catalogMixer=new O.d(null),a.viewer.mixer.timeScale=0;var h,d=0;(n.forEach((function(e){d=Math.max(d,e.duration);var t=a.viewer.mixer.clipAction(e.optimize(),a.viewer.scene);t.loop=O.Q,a.viewer.actions.push(t),1===n.length&&a.viewer.mixer.addEventListener("finished",(function(e){e.action===t&&(a.viewer.mixer.setTime(.1),a.viewer.actions.forEach((function(e){e.reset(),e.time=a.viewer.mixer.time,e.play()})),a.viewer.mixer.timeScale=1,a.viewer.mixer.update(1e-5))}))})),"\u041b\u0435\u0431\u0435\u0434\u043a\u0430"===a.viewer.model.name)&&((h=a.viewer.actions).push.apply(h,Object(w.a)(H(a.viewer.scene,a.viewer.mixer))),i=210);a.viewer.actions.forEach((function(e){return e.play()})),a.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{data:Object(E.a)(Object(E.a)({},e.data),{},{duration:d,scale:i.toFixed(1)})})})),a.viewer.clock=new O.n,a.viewer.renderer=new D({antialias:!0,canvas:a.viewer.host.getElementsByTagName("canvas")[0],autoClearDepth:!1}),a.viewer.camera=a.viewer.scene.getObjectByName("__MainCamera"),a.viewer.scene.traverse((function(e){"PerspectiveCamera"===e.type&&(e.aspect=a.props.width/a.props.height,e.updateProjectionMatrix())})),a.viewer.controls=new S.a(a.viewer.camera,a.viewer.renderer.domElement),a.viewer.controls.target=a.viewer.scene.getObjectByName("__MainTarget").position.clone(),a.annotationsExt&&a.annotationsExt.setCamera(a.viewer.camera),t()}),(function(){return a.setState({redirect:!1})}),void 0,n)}},{key:"startViewer",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stopViewer",value:function(){this.frameId&&cancelAnimationFrame(this.frameId)}},{key:"initExtensions",value:function(){var e=this,t=this.viewer.renderer.domElement;this.offset={top:document.querySelector("#Navbar").clientHeight+document.querySelector("#Nav").clientHeight,right:0,bottom:0,left:0};var a=new O.Jb;t.onmousemove=function(t){a.x=t.clientX-e.offset.left,a.y=t.clientY-e.offset.top},t.oncontextmenu=function(a){var n=new O.Jb;if(n.x=a.pageX,n.y=a.pageY-e.offset.top,e.viewer.intersects){if("ietm"!==e.props.stores.tabsFlagStore.tabsData.info.active){var i=new CustomEvent("contextMenu",{detail:{objects:e.viewer.intersects,mouseCoords:n,e:a}});t.dispatchEvent(i)}var s=new CustomEvent("item_clicked",{detail:{objects:e.viewer.intersects,mouseCoords:n,e:a}});0===e.props.state&&t.dispatchEvent(s)}},this.castRays=function(){e.target.x=a.x/t.clientWidth*2-1,e.target.y=-a.y/t.clientHeight*2+1,e.raycaster.setFromCamera(e.target,e.viewer.camera),e.boxMesh.geometry.computeBoundingBox(),e.ray.copy(e.raycaster.ray).applyMatrix4(e.inverseMatrix),null!==e.boxMesh.geometry.boundingBox&&(e.ray.intersectsBox(e.boxMesh.geometry.boundingBox)?e.viewer.intersects=e.raycaster.intersectObjects(e._model.children,!0):e.viewer.intersects=[]),e.viewer.scene.remove(e.boxMesh)};var n=this.props,i=n.width,s=n.height,o=this.props.stores.tabsFlagStore.tabsData.info.active;this.hilightPartsExt=new A(t,o),this.contextMenu=new L(t,this.viewer.controls,this.viewer,o),this.annotationsExt=new R(this.viewer.camera,t,{width:i,height:s},this.viewer.scene)}},{key:"resizeCanvas",value:function(){var e=this;if(this.viewer.renderer){var t=this.props,a=t.width,n=t.height,i=this.viewer.renderer.domElement;if(Math.floor(i.width)!==Math.floor(a)||Math.floor(i.height)!==Math.floor(n)){if(n>a){var s=n;n=a,a=s}this.viewer.renderer.setSize(this.props.width,this.props.height,!1),this.viewer.composer&&this.viewer.composer.setSize(Math.floor(a),Math.floor(n)),this.viewer.scene.traverse((function(t){"PerspectiveCamera"===t.type&&(t.aspect=e.props.width/e.props.height,t.updateProjectionMatrix())}))}this.annotationsExt&&this.annotationsExt.setViewerSizes({width:a,height:n})}}},{key:"handlePlayButtonClick",value:function(e){this.setState((function(t){return Object(E.a)(Object(E.a)({},t),{},{data:Object(E.a)(Object(E.a)({},t.data),{},{play:e})})}))}},{key:"handleTimeChange",value:function(e){var t=e/100,a=this.state.data.duration*t;this.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{data:Object(E.a)(Object(E.a)({},e.data),{},{time:a})})}))}},{key:"render",value:function(){var e=this,t=this.props.stores.tabsFlagStore.tabs.info.active;return i.a.createElement("div",{ref:function(t){e.viewer.host=t},className:"model-viewer"},i.a.createElement("canvas",{style:{width:"100%",height:"100%",position:"absolute"}}),i.a.createElement("div",{className:"lds-ring"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("div",{className:"fulscreen-popup-info",hidden:!this.props.matches||this.props.width<1200},i.a.createElement(B.a,{i18nKey:"viewer.fullscreen"},"\u0427\u0442\u043e\u0431\u044b \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 ",i.a.createElement("span",null,"Esc"))),i.a.createElement("section",{className:"interaction-icons",onClick:this.menuButtonClicked,hidden:"ietm"===t},i.a.createElement("div",{className:"edit-block-container"},this.additionalMenu()),i.a.createElement("button",{type:"button",className:"btn","data-title":"rotate","data-tip":this.props.t("viewer.mainMenu.rotate.title")},i.a.createElement(G.a,null)),i.a.createElement("button",{type:"button",className:"btn","data-title":"space","data-tip":this.props.t("viewer.mainMenu.explode.title")},i.a.createElement(J.a,null)),i.a.createElement("button",{type:"button",className:"btn","data-title":"cut","data-tip":this.props.t("viewer.mainMenu.cut.title")},i.a.createElement($.a,null)),i.a.createElement("button",{type:"button",className:"btn","data-title":"restoreView","data-tip":this.props.t("viewer.mainMenu.restoreView.title")},i.a.createElement(te.a,null)),i.a.createElement("button",{type:"button",className:"btn button-show-all","data-tip":this.props.t("viewer.mainMenu.restoreVisibility.title")},i.a.createElement(ne.a,null)),i.a.createElement("button",{type:"button",className:"btn","data-title":"fullscreen","data-tip":this.props.stores.tabsFlagStore.fullscreen?this.props.t("viewer.mainMenu.fullscreen.title2"):this.props.t("viewer.mainMenu.fullscreen.title")},this.props.stores.tabsFlagStore.fullscreen?i.a.createElement(pe.a,null):i.a.createElement(me.a,null)),i.a.createElement(M.a,{type:"light",border:!0,borderColor:"#ced4da",backgroundColor:"whitesmoke",textColor:"#495057",effect:"solid",className:"tooltip",place:"top"})),i.a.createElement("div",{className:"d-flex flex-column context-menu",style:{position:"absolute",zIndex:"9999",visibility:"hidden"},id:"context-menu"},i.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},i.a.createElement("button",{type:"button",className:"btn",id:"button-hide","data-tip":this.props.t("viewer.contextMenu.hide.title")},i.a.createElement(se.a,null)),i.a.createElement("button",{type:"button",className:"btn",id:"button-annotation",hidden:0!==this.props.state,"data-tip":this.props.t("viewer.contextMenu.annotation.title")},i.a.createElement(he.a,null)),i.a.createElement("button",{type:"button",className:"btn button-show-all","data-tip":this.props.t("viewer.contextMenu.restoreVisibility.title")},i.a.createElement(ne.a,null)),i.a.createElement("button",{type:"button",className:"btn",id:"button-fit","data-tip":this.props.t("viewer.contextMenu.fitIntoView.title")},i.a.createElement(re.a,null)),i.a.createElement("button",{type:"button",className:"btn",id:"button-isolate","data-tip":this.props.t("viewer.contextMenu.isolate.title")},i.a.createElement(ce.a,null))),i.a.createElement("div",{className:"collapse",id:"annottation-collapse",style:{position:"absolute"}},i.a.createElement("div",{className:"form-group card context-annotation-form text-centered",id:"annotation-panel"},i.a.createElement("label",{htmlFor:"annotation-text"},this.props.t("viewer.contextMenu.annotation.text")),i.a.createElement("textarea",{id:"annotation-text",defaultValue:this.props.t("viewer.contextMenu.annotation.defaultValue")}),i.a.createElement("button",{type:"submit",id:"button-add-annotation",className:"btn btn-primary mt-2"},this.props.t("viewer.contextMenu.annotation.add"))))),i.a.createElement(C.a,{top:"auto",bottom:0}),i.a.createElement("div",{id:"scale"},i.a.createElement("span",null,this.state.data.scale," ",this.props.t("viewer.units"))),i.a.createElement("div",{id:"player",hidden:2!==this.props.state},i.a.createElement("div",{id:"playerControls"},i.a.createElement("span",{id:"recordBtn",className:"text-primary"}),i.a.createElement("span",{id:"playBtn",onClick:function(t){return e.handlePlayButtonClick(!0)},hidden:this.state.data.play,className:"text-primary"},"\u25b6"),i.a.createElement("span",{id:"pauseBtn",onClick:function(t){return e.handlePlayButtonClick(!1)},hidden:!this.state.data.play,className:"text-primary"},"\u2759\u2759"),i.a.createElement("input",{value:this.state.data.time/this.state.data.duration*100,onChange:function(t){return e.handleTimeChange(t.target.value)},type:"range",step:"0.01",className:"custom-range",id:"customRange1"}),i.a.createElement("span",{id:"time"},"".concat(fe(1e3*this.state.data.time/3)," / ").concat(fe(1e3*this.state.data.duration/3))))))}}]),a}(n.Component),we=Object(N.a)()(f(be)),ge=(a(99),a(63)),ye=a.n(ge),_e=a(61),xe=a.n(_e),Ee=a(62),je=a.n(Ee),Oe=a(60),Se=a.n(Oe),Me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this)).viewer=e.stores.threeOptionsStore.viewData,n.depth=1,n.highlightExt=new A(null,null),n}return Object(l.a)(a,[{key:"handleChildClick",value:function(){var e=Object(_.a)(y.a.mark((function e(t){var a,n,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.viewer.scene.getObjectById(t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.props.stores.threeOptionsStore.clearData();case 5:this.isAssembly(t)&&!this.isRoot(t)&&(this.resetAnimations(),this.viewer.catalogRoot=a,(n=new O.h).setFromObject(a),i=new O.Kb,n.getCenter(i),this.viewer.plant.copy(new O.Kb(i.x,i.y,i.z)),this.isolateChild(a),this.fitToView(t),this.handleChildMouseLeave(t),this.viewer.catalogActions.forEach((function(e){return e.play()})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChildMouseEnter",value:function(e){var t=this,a=this.viewer.scene.getObjectById(e);if(a){var n=[];a.traverse((function(e){"Mesh"===e.type&&(t.highlightExt.toFront(e),n.push(e)),"LineSegments"===e.type&&(t.highlightExt.toFront(e),n.push(e))})),this.viewer.model.traverse((function(e){"Mesh"!==e.type&&"LineSegments"!==e.type||n.indexOf(e)}))}}},{key:"handleChildMouseLeave",value:function(e){var t=this,a=this.viewer.scene.getObjectById(e);a&&a.traverse((function(e){"Mesh"===e.type&&t.highlightExt.toBack(e),"LineSegments"===e.type&&t.highlightExt.toBack(e)}))}},{key:"resetAnimations",value:function(){var e=this;this.viewer.catalogMixer.stopAllAction(),this.viewer.catalogActions.forEach((function(t){e.viewer.catalogMixer.uncacheAction(t.getClip(),t.getRoot())})),this.viewer.catalogActions=[]}},{key:"isolateChild",value:function(e){var t=this,a=[];e.traverse((function(e){"Mesh"!==e.type&&"LineSegments"!==e.type||a.push(e)})),this.viewer.model.traverse((function(e){if(("Mesh"===e.type||"LineSegments"===e.type)&&a.indexOf(e)<0){var n=new O.g(".material.transparent",[0,.001,.3],[e.material.transparent,!0,!0]),i=new O.g(".visible",[0,.3],[e.visible,!1]),s=new O.fb(".material.opacity",[0,.3],[e.material.opacity,0],O.G),o=new O.c(null,-1,[s,i,n]),r=t.viewer.catalogMixer.clipAction(o,e);r.loop=O.Q,r.clampWhenFinished=!0,t.viewer.catalogActions.push(r)}})),a.forEach((function(e){var a=new O.g(".material.transparent",[0,.3],[e.material.transparent,!1]),n=new O.g(".visible",[0,.001,.3],[e.visible,!0,!0]),i=new O.fb(".material.opacity",[0,.3],[e.material.opacity,1],O.G),s=new O.c(null,-1,[i,n,a]),o=t.viewer.catalogMixer.clipAction(s,e);o.loop=O.Q,o.clampWhenFinished=!0,t.viewer.catalogActions.push(o)}))}},{key:"showAll",value:function(){this.viewer.catalogMixer.stopAllAction(),this.viewer.model.traverse((function(e){"Mesh"===e.type||e.type}))}},{key:"isRoot",value:function(e){var t=this.viewer.scene.getObjectById(e);return!!t&&t===this.viewer.model.parent}},{key:"isAssembly",value:function(e){var t=this.viewer.scene.getObjectById(e);return!!t&&(!!t.children&&(!(t.children.length<1)&&(!(t.children.length>1)||!("Mesh"===t.children[1].type&&"LineSegments"===t.children[0].type||"Mesh"===t.children[0].type&&"LineSegments"===t.children[1].type))))}},{key:"toggleVisible",value:function(e){e.visible=!e.visible,this.forceUpdate()}},{key:"fitToView",value:function(e){var t=this,a=this.viewer.scene.getObjectById(e);if(a){var n=new O.h;n.setFromObject(a);var i=new O.Kb;n.getSize(i);var s=Math.max(i.x,i.y,i.z)/(2*Math.tan(this.viewer.controls.object.fov*(Math.PI/360)));this.viewer.controls.object=this.viewer.scene.getObjectByName("__MainCamera");var o=this.viewer.scene.getObjectByName("__CatalogCamera"),r=new O.jb,l=new O.Kb(0,0,-1);l.applyQuaternion(o.quaternion).normalize(),r.setFromNormalAndCoplanarPoint(l,this.viewer.controls.target);var c=new O.Kb,u=new O.Kb;n.getCenter(u),r.projectPoint(u,c);var h=c.sub(this.viewer.controls.target),d=o.position.clone().add(h),m=u.clone().sub(d);m.setLength(m.length()-1.8*s);var v=d.add(m),p=new O.Lb(".position",[0,.3],[].concat(Object(w.a)(o.position.toArray()),Object(w.a)(v.toArray())),O.G),f=new O.c(null,.3,[p]),b=this.viewer.catalogMixer.clipAction(f,this.viewer.camera);b.loop=O.Q,b.clampWhenFinished=!0,b.play(),this.viewer.catalogMixer.addEventListener("finished",(function(e){e.action===b&&(t.viewer.scene.getObjectByName("__CatalogTarget").position.copy(u),t.viewer.controls.target.copy(u),t.viewer.controls.object=o)}))}}},{key:"render",value:function(){var e=this,t=this.viewer.catalogRoot,a=1;return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("div",{id:"catalog-header",onClick:function(a){return e.handleChildClick(t.parent.id)}},t&&!this.isRoot(t.parent.id)&&i.a.createElement(Se.a,null),i.a.createElement("b",{style:{marginLeft:"16px"}},t&&"\u0410\u0411\u0412\u0413.001.01 "+this.viewer.catalogRoot.name.split("_").join(" "))),i.a.createElement("table",{className:"table table-hover table-striped  "},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{scope:"col"}),i.a.createElement("th",{scope:"col"}),i.a.createElement("th",{style:{textAlign:"center"},scope:"col"},"\u2116"),i.a.createElement("th",{scope:"col"},this.props.t("catalog.partNumber")),i.a.createElement("th",{scope:"col"},this.props.t("catalog.title")),i.a.createElement("th",{scope:"col"}))),i.a.createElement("tbody",null,t&&t.children.map((function(t,n){return i.a.createElement("tr",{key:n,onMouseEnter:function(a){return e.handleChildMouseEnter(t.id)},onMouseLeave:function(a){return e.handleChildMouseLeave(t.id)}},i.a.createElement("td",null),i.a.createElement("td",null,t.visible&&i.a.createElement(xe.a,{color:"action",onClick:function(a){return e.toggleVisible(t)}}),!t.visible&&i.a.createElement(je.a,{color:"disabled",onClick:function(a){return e.toggleVisible(t)}})),i.a.createElement("td",{onClick:function(a){return e.handleChildClick(t.id)},style:{textAlign:"center"}},a++),i.a.createElement("td",{onClick:function(a){return e.handleChildClick(t.id)}},"\u0410\u0411\u0412\u0413.".concat(("00"+e.depth).slice(-3),".").concat(("00"+(a-1)).slice(-3))),i.a.createElement("td",{onClick:function(a){return e.handleChildClick(t.id)},uuid:t.uuid},t.name.split("_").join(" ")),i.a.createElement("td",{onClick:function(a){return e.handleChildClick(t.id)}},e.isAssembly(t.id)&&i.a.createElement(ye.a,null)))})))))}}]),a}(i.a.Component),ke=Object(N.a)()(f(Me)),Ce=(a(100),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).viewer=e.stores.threeOptionsStore.viewData,n.currentStep=0,n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.currentStep!==Math.floor(JSON.parse(JSON.stringify(this.viewer.step)))&&(document.getElementsByClassName("current")[0].scrollIntoView({behavior:"smooth",block:"start"}),this.currentStep=Math.floor(JSON.parse(JSON.stringify(this.viewer.step))))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.props.t("manual.steps",{returnObjects:!0}).map((function(t,a){return i.a.createElement("div",{key:a,className:Math.floor(e.viewer.step)===a?"current":"step"},i.a.createElement("span",{className:"step-number"},a+1),i.a.createElement("span",{className:"step-content"},t))})))}}]),a}(i.a.Component)),Ne=Object(N.a)()(f(Ce)),Be=(a(101),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this)).handleModelClick=function(e){n.modelsStore.setCurrentModel(e)},n.handleChange=function(){n.modelsStore.setCurrentModel(document.querySelector(".select-model").value)},n.modelsStore=e.stores.modelsStore,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.modelsStore.models,a=this.props.stores.tabsFlagStore.tabs.info.active,n=t.map((function(t){return i.a.createElement("option",{value:t.id,key:t.id},e.props.t("models.".concat(t.id,".name")))}));return i.a.createElement("section",{className:"model-select",hidden:"ietm"===a},i.a.createElement("h2",null,this.props.t("viewer.chooseModel")),i.a.createElement("select",{className:"form-control select-model",onChange:this.handleChange},n))}}]),a}(i.a.Component)),ze=Object(N.a)()(f(Be)),Le=a(64),Ae=a.n(Le),Pe=f(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){e.forceUpdate()}))}},{key:"render",value:function(){var e=this.props.stores.tabsFlagStore.tabs,t=this.props.stores.tabsFlagStore.fullscreen,a=-1;switch(e.info.active){case"catalog":a=1;break;case"ietm":a=2;break;default:a=0}var n=this.props.stores.modelsStore.currentGlb,s=this.props.stores.modelsStore.currentModel,o=function(a){return t||"modelsList"!==e.info.active?{gridArea:"viewer"}:a?{gridArea:"document / viewer / viewer / document"}:{gridArea:"viewer / document / document / viewer"}};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.a,{orientation:"landscape"},(function(s){return i.a.createElement("section",{className:"viewer",style:o(s)},i.a.createElement(ze,null),i.a.createElement(we,{glb:n,width:"modelsList"!==e.info.active&&s&&!t?.55*window.innerWidth:window.innerWidth,height:s||t?window.innerHeight-(t?0:96):"modelsList"===e.info.active?window.innerHeight-96:window.innerHeight-.4*window.innerHeight-96-24,state:a,matches:s}))})),i.a.createElement("section",{className:"document",hidden:"catalog"!==e.info.active},i.a.createElement(ke,{isOpen:"catalog"===e.info.active})),1===s.id?i.a.createElement("section",{className:"document",hidden:"ietm"!==e.info.active},i.a.createElement(Ne,{isOpen:"ietm"===e.info.active})):null)}}]),a}(i.a.Component)),Te=(a(102),f(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{id:"container"},i.a.createElement(v,null),i.a.createElement(b,null),i.a.createElement(Pe,null))}}]),a}(i.a.Component)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=a(37),De=a(16),qe=a(65),Ze=a(68);Fe.a.use(qe.a).use(Ze.a).use(De.e).init({fallbackLng:"ru",debug:!1,whitelist:["ru","en"],interpolation:{escapeValue:!1},react:{defaultTransParent:"div",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i"]}});Fe.a;var Ye=a(2),Xe=(a(34),function(){function e(t){Object(r.a)(this,e),this.tabsData={},this.fullscreen=!1,this.rootStore=t,this.tabsData={info:{active:"modelsList",prev:"modelsList"}}}return Object(l.a)(e,[{key:"switchTab",value:function(e){this.tabsData.info.prev=this.tabsData.info.active,this.tabsData.info.active=e}},{key:"tabs",get:function(){return this.tabsData}}]),e}());Object(Ye.decorate)(Xe,{tabsData:Ye.observable,tabs:Ye.computed,switchTab:Ye.action,fullscreen:Ye.observable});var Ie=function(){function e(t){Object(r.a)(this,e),this.modelsData=[],this.currentModel={},this.rootStore=t,this.modelsData=[{id:1,urn:"/models/glb/1.glb",img:"/models/img/1.png"},{id:2,urn:"/models/glb/2.glb",img:"/models/img/2.png"},{id:3,urn:"/models/glb/3.glb"},{id:4,urn:"/models/glb/4.glb"},{id:5,name:"\u0413\u0430\u0437\u043e\u0432\u0430\u044f \u0441\u0442\u0430\u043d\u0446\u0438\u044f",urn:"/models/glb/5.glb"},{id:6,name:"\u0422\u043e\u0447\u0438\u043b\u043e",urn:"/models/glb/6.glb"},{id:7,name:"\u0420\u0435\u0434\u0443\u043a\u0442\u043e\u0440",urn:"/models/glb/7.glb"}],this.currentModel=this.modelsData[0]}return Object(l.a)(e,[{key:"setCurrentModel",value:function(e){for(var t in this.modelsData){var a=this.modelsData[t];if(+e===a.id)return void(this.currentModel=a)}}},{key:"models",get:function(){return this.modelsData}},{key:"currentGlb",get:function(){return this.currentModel.urn}}]),e}();Object(Ye.decorate)(Ie,{modelsData:Ye.observable,currentModel:Ye.observable,models:Ye.computed,currentGlb:Ye.computed,setCurrentModel:Ye.action});var Ke=function(){function e(t){Object(r.a)(this,e),this._viewData={host:{},scene:new O.xb,renderer:new O.Mb,camera:new O.l,controls:{},modelBoundingBox:{},raycaster:{},mouse:{},mixer:new O.d,catalogMixer:new O.d,clock:new O.n,actions:[],catalogActions:[],time:0,isPlaying:!1,step:0,catalogRoot:void 0,model:new O.gb,plant:new O.Kb},this.clearData=function(){},this.rootStore=t}return Object(l.a)(e,[{key:"viewData",get:function(){return this._viewData},set:function(e){this._viewData=e}}]),e}();Object(Ye.decorate)(Ke,{_viewData:Ye.observable,viewData:Ye.computed,setViewData:Ye.action,clearData:Ye.observable});var Ve=new function e(){Object(r.a)(this,e),this.storage=localStorage,this.tabsFlagStore=new Xe(this),this.modelsStore=new Ie(this),this.threeOptionsStore=new Ke(this)};o.a.render(i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(p.a,{stores:Ve},i.a.createElement(Te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},39:function(e,t,a){e.exports=a.p+"static/media/logo512.3c5b3174.png"},71:function(e,t,a){e.exports=a(106)},76:function(e,t,a){},77:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){},99:function(e,t,a){}},[[71,1,2]]]);